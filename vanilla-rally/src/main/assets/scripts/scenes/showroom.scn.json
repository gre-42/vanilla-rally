[
  {
    "declare_macro": "create_showroom_scene",
    "content": [
      {
        "call": "create_scene",
        "literals": {
          "name": "showroom",
          "z_order": 0,
          "focus_mask": "menu",
          "submenus": ["car_selector", "car_color_selector"],
          "fly": false,
          "rotate": false,
          "print_gamepad_buttons": false,
          "depth_fog": false,
          "low_pass": false,
          "high_pass": false,
          "with_skybox": false,
          "with_flying_logic": false,
          "clear_mode": "depth"
        }
      },
      {
        "playback": "_initialize_showroom_scene",
        "context": "showroom"
      }
    ]
  },
  {
    "declare_macro": "_create_showroom_vehicle",
    "content": [
      {
        "playback": "create_$VEHICLE_CLASS",
        "literals": {
          "HUMAN_NAME": "%VEHICLE_NAME",
          "SKATER_NAME": "%VEHICLE_NAME",
          "CAR_NAME": "%VEHICLE_NAME",
          "HUMAN_NODE_POSITION": [0, 0.7, -11],
          "SKATER_NODE_POSITION": [0, 0.7, -11],
          "CAR_NODE_POSITION": [0, 0.7, -11],
          "HUMAN_NODE_ANGLE_Y": 135,
          "SKATER_NODE_ANGLE_Y": 135,
          "CAR_NODE_ANGLES": [0, 135, 0],
          "IF_HUMAN_STYLE": true,
          "IF_SKATER_STYLE": true,
          "IF_CAR_BODY_RENDERABLE_STYLE": true,
          "COLOR": "%VEHICLE_COLOR",
          "DECIMATE": "%DECIMATE",
          "SUFFIX": "",
          "IF_WITH_GRAPHICS": true,
          "IF_WITH_PHYSICS": true,
          "IF_WITH_GUN": false,
          "IF_STATIC": false,
          "IF_DYNAMIC": true,
          "HAND_BRAKE_PULLED": true,
          "MUTE": true,
          "VELOCITY_ERROR_STD": 0,
          "YAW_ERROR_STD": 0,
          "PITCH_ERROR_STD": 0,
          "ERROR_ALPHA": 1,
          "IF_SHADOW": true,
          "IF_PLAYBACK_TRACK": false,
          "IF_PLAYBACK_WINNER": false,
          "IF_SPAWNER": false,
          "IF_PLAYER": false,
          "IF_DAMAGEABLE": false
        }
      }
    ]
  },
  {
    "declare_macro": "change_showroom_vehicle",
    "content": [
      {
        "call": "delete_root_nodes",
        "literals": {
          "regex": "^(car|human|skater)_node(_trailer)?$"
        }
      },
      {
        "playback": "_create_showroom_vehicle",
        "literals": {
          "VEHICLE_NAME": "%VEHICLE_NAME",
          "VEHICLE_CLASS": "%VEHICLE_CLASS",
          "VEHICLE_COLOR": "%VEHICLE_COLOR",
          "DECIMATE": "%DECIMATE"
        }
      }
    ]
  },
  {
    "declare_macro": "_initialize_showroom_scene",
    "content": [
      {
        "playback": "scene_minimal",
        "literals": {
          "IF_DIRTMAP": false,
          "IF_SKYBOX": false
        }
      },
      {
        "playback": "add_sky_light_day"
      },
      {
        "playback": "add_distant_light_day",
        "literals": {
          "LEFT": -400,
          "RIGHT": 400,
          "BOTTOM": -200,
          "TOP": 200
        }
      },
      {
        "playback": "add_local_instances_light",
        "literals": {
          "LSUFFIX": "_local_instances"
        }
      },
      {
        "comment": "macro_playback add_local_blob_instances_light LSUFFIX:-blobs"
      },
      {
        "call": "obj_resource",
        "literals": {
          "name": "showroom_ground",
          "filename": "models/metal_cylinder.obj",
          "position": [0, 0, 0],
          "rotation": [0, 0, 0],
          "scale": [10, 0.1, 10],
          "center_distances": [0, "inf"],
          "blend_mode": "off",
          "alpha_distances": [0, 0, "inf", "inf"],
          "occluded_pass": "lightmap_black_node",
          "occluder_pass": "none",
          "aggregate_mode": "none",
          "transformation_mode": "all"
        }
      },
      {
        "call": "obj_resource",
        "literals": {
          "name": "showroom_ground_hitbox",
          "filename": "models/cylinder_hitbox.obj",
          "position": [0, 0, 0],
          "rotation": [0, 0, 0],
          "scale": [10, 0.1, 10],
          "center_distances": [0, "inf"],
          "blend_mode": "off",
          "alpha_distances": [0, 0, "inf", "inf"],
          "occluded_pass": "lightmap_black_node",
          "occluder_pass": "none",
          "aggregate_mode": "none",
          "transformation_mode": "all"
        }
      },
      {
        "call": "modify_physics_material_tags",
        "literals": {
          "resource_name": "showroom_ground_hitbox",
          "add": "attr_convex"
        }
      },
      {
        "call": "root_node_instance",
        "literals": {
          "type": "dynamic",
          "name": "stage",
          "position": [0, -1.3, -11],
          "rotation": [0, 0, 0],
          "scale": 1
        }
      },
      {
        "call": "renderable_instance",
        "literals": {
          "name": "stage",
          "node": "stage",
          "resource": "showroom_ground"
        }
      },
      {
        "call": "rigid_cuboid",
        "literals": {
          "node": "stage",
          "hitboxes": "showroom_ground_hitbox",
          "mass": "inf",
          "size": [1, 2, 3],
          "w": [0, 10, 0],
          "collidable_mode": "static",
          "name": "stage",
          "asset_id": "state_no_id"
        }
      },
      {
        "call": "relative_transformer",
        "literals": {
          "node": "stage",
          "w": [0, 10, 0]
        }
      }
    ]
  }
]
