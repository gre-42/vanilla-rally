{
  "declare_macro": "scene_racing_static",
  "content": [
    {
      "required": ["%OSM_MAP_RESOURCE != %null"],
      "playback": "%OSM_MAP_RESOURCE"
    },
    {
      "required": ["%IF_HAS_OVERLAY"],
      "playback": "%OSM_MAP_OVERLAY_RESOURCE"
    },
    {
      "call": "create_scene",
      "arguments": {
        "name": "primary_scene",
        "world": "common",
        "focus_mask": "scene|countdown_any|game_over_countdown_any",
        "submenus": [],
        "fly": "%primary_scene_fly",
        "rotate": "%primary_scene_rotate",
        "depth_fog": "%primary_scene_depth_fog",
        "low_pass": "%primary_scene_low_pass",
        "high_pass": "%primary_scene_high_pass",
        "bloom_iterations": "%primary_scene_bloom_iterations",
        "bloom_thresholds": "%primary_scene_bloom_thresholds",
        "with_skybox": "%primary_scene_with_skybox",
        "with_flying_logic": "%primary_scene_with_flying_logic",
        "clear_mode": "color_and_depth",
        "max_tracks": 5,
        "save_playback": "%primary_scene_save_playback"
      }
    },
    {
      "call": "instantiate_game_logic",
      "context": "primary_scene",
      "arguments": {
        "setup_new_round": {
          "playback": "_setup_new_round",
          "context": "primary_scene"
        }
      }
    },
    {
      "call": "create_scene",
      "arguments": {
        "name": "weapon_closeup",
        "world": "common",
        "focus_mask": "scene|countdown_any|game_over_countdown_any",
        "submenus": [],
        "fly": false,
        "rotate": false,
        "depth_fog": false,
        "low_pass": false,
        "high_pass": false,
        "bloom_iterations": [0, 0],
        "bloom_thresholds": [1, 1, 1],
        "with_skybox": false,
        "with_flying_logic": false,
        "clear_mode": "depth"
      }
    },
    {
      "playback": "_setup_weapon_closeup",
      "context": "weapon_closeup"
    },
    {
      "playback": "_scene_racing_instantiate_static_objects",
      "context": "primary_scene",
      "arguments": {
        "IF_INSTANTIATE_OSM_MAP": "%OSM_MAP_RESOURCE != %null",
        "IF_CREATE_PC_PLAYER": "%IF_CREATE_PC_PLAYER",
        "IF_PC_PLAYER_PLAYBACK": "%IF_PC_PLAYER_PLAYBACK",
        "PC_PLAYER_PLAYBACK": "%PC_PLAYER_PLAYBACK",
        "PC_PLAYER_PLAYBACK_SPEEDUP": "%PC_PLAYER_PLAYBACK_SPEEDUP",
        "SCORE_BOARD": "%SCORE_BOARD",
        "IF_GEN_GRIND_LINES": "%IF_GEN_GRIND_LINES",
        "IF_GEN_INSTANCES": "%IF_GEN_INSTANCES",
        "IF_EXTRACT_ALIGNMENT_PLANES": "%IF_EXTRACT_ALIGNMENT_PLANES",
        "BARRIER_DEPTH": "%BARRIER_DEPTH",
        "IF_WITH_GEOGRAPHIC_MAPPING": "%IF_WITH_GEOGRAPHIC_MAPPING",
        "STADIUM_CAMERA_POSITION": "%STADIUM_CAMERA_POSITION",
        "IF_HAS_OVERLAY": "%IF_HAS_OVERLAY",
        "DIRTMAP_LEFT": "%DIRTMAP_LEFT",
        "DIRTMAP_RIGHT": "%DIRTMAP_RIGHT",
        "DIRTMAP_BOTTOM": "%DIRTMAP_BOTTOM",
        "DIRTMAP_TOP": "%DIRTMAP_TOP",
        "IF_DIRTMAP": "%IF_DIRTMAP",
        "DIRTMAP_TEXTURE": "%DIRTMAP_TEXTURE",
        "DIRTMAP_OFFSET": "%DIRTMAP_OFFSET",
        "DIRTMAP_DISCRETENESS": "%DIRTMAP_DISCRETENESS",
        "DIRT_SCALE": "%DIRT_SCALE",
        "DIRTMAP_WRAP_MODE": "%DIRTMAP_WRAP_MODE",
        "SOFT_LIGHT_TEXTURE": "%SOFT_LIGHT_TEXTURE"
      }
    },
    {
      "execute": [
        {
          "playback": "create_tripod_key_bindings",
          "context": "primary_scene"
        },
        {
          "call": "globals",
          "arguments": { "IF_TRIPOD_MODE_OLD": false }
        }
      ]
    }
  ]
}
